<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>INDEX</title>
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
	integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
	crossorigin="anonymous">
</head>
<body>
	<div class="container">
		<h1 class="text-center">DASHBOARD</h1>

		<hr>

		<div th:if="${exception1 != null}">
			<div class="alert alert-info mt-2" th:text="${exception1}"></div>
		</div>
		<!-- -
		<div th:if="${param.errTransaction}">
			<div class="alert alert-info mt-2" th:text="non-sufficient funds">insuffisant account</div>
		</div>
		
		 -->


		<div>
			<h2 th:text="${'Hello ' + logUser.getLastName()}">Bonjour</h2>
		</div>

		<div>
			<h2
				th:text="${'Your actual account: ' + logUser.getAccount() + ' €'}">Votre
				compte</h2>
		</div>


		<table class="table table-bordered table-striped">
			<tr>
				<th colspan="2">Your Contact</th>
				<th>Email</th>
			</tr>

			<tr th:each="contacts : ${logUser.getContact()}">
				<td th:text="${contacts.getLastName()}">my contacts</td>
				<td th:text="${contacts.getFirstName()}">my contacts</td>
				<td th:text="${contacts.getEmail()}">my contacts</td>
			</tr>


		</table>


		<div></div>

		<!-- CREDITER SON COMPTE -->

		<form th:action="@{/creditAccount}" method="POST">

			<!-- GRACE A L'ATTRIBUT "NAME", ON peut faire le lien avec le paramètre de la méthode invoqué via l'URL ci dessus -->

			<input class="form-control" type="number" name="amount"
				placeholder="Amount">
			<div>
				<button type="submit" class="btn btn-success mt-2">Credit
					my account</button>
			</div>
		</form>

		<hr>

		<!-- TRANSACTION -->

		<form action="#" th:action="@{/transaction}" method="POST">

			<input class="form-control" placeholder="Amount"
				name="transactionAmount" type="number"> 
			<input
				class="form-control" placeholder="Description" name="description"
				type="text">
				
			<!-- 		<input class="form-control" placeholder="To" name="email" type="text"> -->

			<select class="form-select" name="email" aria-label="Default select example">
  				<option value="0" >Select Contact</option>
  				<option th:each="c : ${logUser.getContact()}"th:value="${c.getEmail()}" th:text="${c.getEmail()}"></option>

			</select>


			<div>
				<button type="submit" class="btn btn-success mt-2">Transaction</button>
			</div>
		</form>

		<hr>


		<!-- AJOUTER UN CONTACT-->

		<form th:action="@{/addContact}" method="POST">

			<input class="form-control" type="text" name="email"
				placeholder="Your contact's email">
			<div>
				<button type="submit" class="btn btn-success mt-2">Add a
					contact</button>
			</div>
		</form>
		
		<a href="/login" th:ref="@{/login}">Login Page</a>

	</div>



</body>
</html>